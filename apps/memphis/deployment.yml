apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: memphis-staging
  namespace: argocd
spec:
  project: staging
  source:
    repoURL: 'https://k8s.memphis.dev/charts/'
    targetRevision: 1.0.1
    chart: memphis
    # Uncommented in production, fine for staging to leave commented out
    # helm:
    #   values: |
    #     global:
    #       cluster:
    #         enabled: true
  destination:
    namespace: memphis
    name: k0s-cluster-staging
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
